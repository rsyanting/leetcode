# 19 : åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹

## ğŸ“Œé¢˜ç›®è¯¦æƒ…

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/)

ğŸ“—Difficultyï¼š**Medium** 

ğŸ¯Tagsï¼š

+ **[é“¾è¡¨](https://leetcode-cn.com/tag/linked-list/)**
+ **[åŒæŒ‡é’ˆ](https://leetcode-cn.com/tag/two-pointers/)** 
+ **[æ ˆ](https://leetcode-cn.com/tag/stack/)** 

---

## ğŸ“ƒé¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ `n` ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚



**æ ·ä¾‹ 1ï¼š**

```
ç»™å®šä¸€ä¸ªé“¾è¡¨: 1->2->3->4->5, å’Œ n = 2.

å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1->2->3->5.
```



- ç»™å®šçš„ `n` ä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚
- ä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ



****

## ğŸ¹ğŸ¯è§£é¢˜æ€è·¯

### è®¡ç®—é“¾è¡¨çš„é•¿åº¦

éå†ä¸€æ¬¡é“¾è¡¨ï¼Œè®¡ç®—å‡ºé“¾è¡¨çš„é•¿åº¦ `length` ï¼Œå†ä¸€æ¬¡éå†æ—¶ï¼Œåˆ é™¤ç¬¬ `length - N + 1` çš„å…ƒç´ ã€‚



#### ä»£ç å®ç°

```java
// è®¡ç®—å‡º é“¾è¡¨ çš„é•¿åº¦
// å†åˆ é™¤å€’æ•°ç¬¬ N ä¸ªå…ƒç´ 
public ListNode removeNthFromEnd(ListNode head, int n) {
    ListNode dummyHead = new ListNode(-1);
    dummyHead.next = head;
    int length = 0;
    ListNode first = dummyHead;
    while (first != null) {
        first = first.next;
        length++;
    }
    // ç»“æŸå length çš„é•¿åº¦ä¸ºå®è·µçš„ length + 1
    first = dummyHead;
    length = length - 1 - n;
    while (length > 0) {
        first = first.next;
        length--;
    }
    first.next = first.next.next;
    return dummyHead.next;
}
```



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚éœ€è¦ 2 æ¬¡éå†é“¾è¡¨
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(1)` ã€‚

---

### ä½¿ç”¨æ ˆæ¥æ“ä½œ

åˆ©ç”¨æ ˆçš„ `FILO` æ€§è´¨æ¥è¾…åŠ©æ“ä½œã€‚å°†å…¨éƒ¨çš„èŠ‚ç‚¹å…¥æ ˆï¼Œç„¶åå¼¹å‡ºå€’æ•°çš„ N ä¸ªèŠ‚ç‚¹ï¼Œæœ€ååˆ é™¤ç¬¬ N ä¸ªèŠ‚ç‚¹ã€‚

```java
// æ ˆ
public ListNode removeNthFromEnd(ListNode head, int n) {
    Deque<ListNode> stack = new ArrayDeque<>();

    ListNode dummyHead = new ListNode(-1);
    dummyHead.next = head;
    ListNode p = dummyHead;

    // å°†èŠ‚ç‚¹ä¾æ¬¡å…¥æ ˆ
    while (p != null) {
        stack.addLast(p);
        p = p.next;
    }

    // å¼¹å‡ºå N ä¸ªå…ƒç´ 
    while (n > 0) {
        stack.removeLast();
        n--;
    }

    // æ­¤æ—¶æ ˆé¡¶å…ƒç´ ä¸ºå€’æ•°å‰ N ä¸ªå…ƒç´ çš„å‰é¢ä¸€ä¸ªèŠ‚ç‚¹
    p = stack.removeLast();
    p.next = p.next.next; // ç§»é™¤ç¬¬ N ä¸ªèŠ‚ç‚¹

    return dummyHead.next;
}
```



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n)` ã€‚éœ€è¦ 2 æ¬¡éå†é“¾è¡¨ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` ã€‚éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ ˆæ¥å­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯ã€‚

---

### åŒæŒ‡é’ˆç­–ç•¥

è®¾ç½® `2` ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆ `fast` é¦–å…ˆå‰è¿› `N` ä¸ªå•ä½ï¼Œç„¶å `slow` æŒ‡é’ˆå’Œ `fast` æŒ‡é’ˆåŒæ­¥ç§»åŠ¨ï¼Œå½“ fast èµ°åˆ°å°¾éƒ¨æ—¶ï¼Œ`slow` æŒ‡é’ˆæŒ‡å‘å€’æ•°ç¬¬ `N` ä¸ªèŠ‚ç‚¹ã€‚



```java
// åŒæŒ‡é’ˆ
// éå†ä¸€æ¬¡é“¾è¡¨
public ListNode removeNthFromEnd(ListNode head, int n) {
    ListNode dummyHead = new ListNode(-1);
    dummyHead.next = head;
    ListNode fast = dummyHead;
    ListNode slow = dummyHead;

    // æ‹‰å¼€ n çš„ gap
    while (fast != null && n > 0) {
        fast = fast.next;
        n--;
    }

    // slow å®šä½åˆ°å€’æ•°ç¬¬ N ä¸ªå…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ 
    while (fast != null && fast.next != null) {
        fast = fast.next;
        slow = slow.next;
    }

    slow.next = slow.next.next;

    return dummyHead.next;
}
```

å®é™…ä¸Šï¼Œéœ€è¦ `slow` å®šä½åˆ°å€’æ•°çš„ç¬¬ `N` ä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(1)` ã€‚éœ€è¦ 1 æ¬¡éå†é“¾è¡¨ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(1)` ã€‚

---

## ğŸ’¡æ€»ç»“



