# 40 : ç»„åˆæ€»å’Œ2

## ğŸ“Œé¢˜ç›®è¯¦æƒ…

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/combination-sum-ii/)

ğŸ“—Difficultyï¼š**Medium** 

ğŸ¯Tagsï¼š

+ [å›æº¯](https://leetcode-cn.com/tag/backtracking/)

---

## ğŸ“ƒé¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•°ç»„ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º `target` çš„ç»„åˆã€‚

`candidates` ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

**è¯´æ˜ï¼š**

+ æ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬ `target`ï¼‰éƒ½æ˜¯æ­£æ•´æ•°ã€‚
+ è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ 



**æ ·ä¾‹ 1ï¼š**

```
è¾“å…¥: candidates =Â [10,1,2,7,6,1,5], target =Â 8,
æ‰€æ±‚è§£é›†ä¸º:
[
  [1, 7],
  [1, 2, 5],
  [2, 6],
  [1, 1, 6]
]
```



**æ ·ä¾‹ 2ï¼š**

```
è¾“å…¥: candidates = [2,5,2,1,2], target = 5,
æ‰€æ±‚è§£é›†ä¸º:
[
  [1,2,2],
  [5]
]
```

---

## ğŸ¹ğŸ¯è§£é¢˜æ€è·¯

> [å›æº¯ç®—æ³• + å‰ªæï¼ˆå›æº¯ç»å…¸ä¾‹é¢˜è¯¦è§£ï¼‰](https://leetcode-cn.com/problems/combination-sum-ii/solution/hui-su-suan-fa-jian-zhi-python-dai-ma-java-dai-m-3/)

æœ¬é¢˜ä¸ [39. ç»„åˆæ€»å’Œ](https://leetcode-cn.com/problems/combination-sum/) çš„å·®åˆ«ã€‚39 ä¸­å…ƒç´ å¯ä»¥æ— é™åˆ¶é‡å¤é€‰å–ã€‚æœ¬é¢˜ä¸­ï¼Œæ¯ä¸ªæ•°å­—åœ¨ç»„åˆä¸­åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ã€‚ã€

é¦–å…ˆç”»å‡ºé€’å½’çš„æ ‘å½¢å›¾ã€‚

ä½†æ˜¯é¢˜ç›®è¦æ±‚ï¼Œä¸èƒ½å‡ºç°é‡å¤çš„ç»„åˆã€‚

äº§ç”Ÿé‡å¤çš„åŸå› æ˜¯ï¼šåœ¨æ¯ä¸€ä¸ªç»“ç‚¹ï¼Œåšå‡æ³•ï¼Œå±•å¼€åˆ†æ”¯çš„æ—¶å€™ï¼Œç”±äºé¢˜ç›®ä¸­è¯´ **æ¯ä¸€ä¸ªå…ƒç´ å¯ä»¥é‡å¤ä½¿ç”¨**ï¼Œæˆ‘ä»¬è€ƒè™‘äº† **æ‰€æœ‰çš„** å€™é€‰æ•°ï¼Œå› æ­¤å‡ºç°äº†é‡å¤çš„åˆ—è¡¨ã€‚

ä¸€ç§ç®€å•çš„å»é‡æ–¹æ¡ˆæ˜¯å€ŸåŠ©å“ˆå¸Œè¡¨çš„å¤©ç„¶å»é‡çš„åŠŸèƒ½ï¼Œä½†å®é™…æ“ä½œä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°å¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ã€‚

å¯ä¸å¯ä»¥åœ¨æœç´¢çš„æ—¶å€™å°±å»é‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚é‡åˆ°è¿™ä¸€ç±»ç›¸åŒå…ƒç´ ä¸è®¡ç®—é¡ºåºçš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨æœç´¢çš„æ—¶å€™å°±éœ€è¦ **æŒ‰æŸç§é¡ºåºæœç´¢**ã€‚å…·ä½“çš„åšæ³•æ˜¯ï¼šæ¯ä¸€æ¬¡æœç´¢çš„æ—¶å€™è®¾ç½® **ä¸‹ä¸€è½®æœç´¢çš„èµ·ç‚¹** `begin`ï¼Œè¯·çœ‹ä¸‹å›¾ã€‚

![å›¾ç¤º](https://assets.ryantech.ltd/20201018214321.png)





#### ä»£ç å®ç°

```java
// DFS
// å¤§å‰ªæ + å°å‰ªæ
// å‚è€ƒ 39. ç»„åˆæ€»å’Œ çš„å‰ªæä»£ç 
public List<List<Integer>> combinationSum2(int[] candidates, int target) {
    List<List<Integer>> res = new ArrayList<>();

    if (candidates == null || candidates.length == 0) {
        return res;
    }

    Arrays.sort(candidates); // å…³é”®æ­¥éª¤

    if (candidates[0] > target) {
        return res;
    }

    int len = candidates.length;
    Deque<Integer> path = new ArrayDeque<>();
    dfs(candidates, len, 0, target, path, res);

    return res;
}

private void dfs(int[] candidates, int len, int begin, int target, Deque<Integer> path, List<List<Integer>> res) {
    // é€’å½’ç»“æŸçš„æ¡ä»¶
    if (target == 0) {
        res.add(new ArrayList<>(path));
        return;
    }

    for (int i = begin; i < len; i++) {
        // å¤§å‰ªæï¼Œå¦‚æœå°äºäº†ï¼Œé‚£ä¹ˆä¸éœ€è¦æœç´¢äº†ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ å»æœç´¢
        if (target - candidates[i] < 0) {
            break;
        }

        // å°å‰ªæï¼šåŒä¸€å±‚ç›¸åŒæ•°å€¼çš„ç»“ç‚¹ï¼Œä»ç¬¬ 2 ä¸ªå¼€å§‹ï¼Œå€™é€‰æ•°æ›´å°‘ï¼Œç»“æœä¸€å®šå‘ç”Ÿé‡å¤ï¼Œå› æ­¤è·³è¿‡ï¼Œç”¨ continue
        if (i > begin && candidates[i] == candidates[i - 1]) {
            continue;
        }

        path.addLast(candidates[i]);
        dfs(candidates, len, i + 1, target - candidates[i], path, res); // i + 1 å…ƒç´ ä¸èƒ½é‡å¤ä½¿ç”¨
        path.removeLast();
    }
}
```





---

## ğŸ’¡æ€»ç»“





