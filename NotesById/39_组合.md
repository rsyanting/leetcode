# 39 : ç»„åˆ

## ğŸ“Œé¢˜ç›®è¯¦æƒ…

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/combination-sum/)

ğŸ“—Difficultyï¼š**Medium** 

ğŸ¯Tagsï¼š

+ [å›æº¯](https://leetcode-cn.com/tag/backtracking/)

---

## ğŸ“ƒé¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•°ç»„ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º `target` çš„ç»„åˆã€‚

`candidates` ä¸­çš„æ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚

**è¯´æ˜ï¼š**

+ æ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬ `target`ï¼‰éƒ½æ˜¯æ­£æ•´æ•°ã€‚
+ è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ 



**æ ·ä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šcandidates = [2,3,6,7], target = 7,
æ‰€æ±‚è§£é›†ä¸ºï¼š
[
  [7],
  [2,2,3]
]
```



**æ ·ä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šcandidates = [2,3,5], target = 8,
æ‰€æ±‚è§£é›†ä¸ºï¼š
[
  [2,2,2,2],
  [2,3,3],
  [3,5]
]
```

**æç¤ºï¼š**

- `1 <= candidates.length <= 30`
- `1 <= candidates[i] <= 200`
- `candidate` ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„
- `1 <= target <= 500`



****

## ğŸ¹ğŸ¯è§£é¢˜æ€è·¯

> [å›æº¯ç®—æ³• + å‰ªæï¼ˆå›æº¯ç»å…¸ä¾‹é¢˜è¯¦è§£ï¼‰](https://leetcode-cn.com/problems/combination-sum/solution/hui-su-suan-fa-jian-zhi-python-dai-ma-java-dai-m-2/)

ç”»å‡ºæ ‘å½¢å›¾ è¾…åŠ©åˆ†æ

![æ ‘å½¢å›¾](https://assets.ryantech.ltd/20201018212849.png)



### å»é‡

ä½†æ˜¯é¢˜ç›®è¦æ±‚ï¼Œä¸èƒ½å‡ºç°é‡å¤çš„ç»„åˆã€‚

äº§ç”Ÿé‡å¤çš„åŸå› æ˜¯ï¼šåœ¨æ¯ä¸€ä¸ªç»“ç‚¹ï¼Œåšå‡æ³•ï¼Œå±•å¼€åˆ†æ”¯çš„æ—¶å€™ï¼Œç”±äºé¢˜ç›®ä¸­è¯´ **æ¯ä¸€ä¸ªå…ƒç´ å¯ä»¥é‡å¤ä½¿ç”¨**ï¼Œæˆ‘ä»¬è€ƒè™‘äº† **æ‰€æœ‰çš„** å€™é€‰æ•°ï¼Œå› æ­¤å‡ºç°äº†é‡å¤çš„åˆ—è¡¨ã€‚

ä¸€ç§ç®€å•çš„å»é‡æ–¹æ¡ˆæ˜¯å€ŸåŠ©å“ˆå¸Œè¡¨çš„å¤©ç„¶å»é‡çš„åŠŸèƒ½ï¼Œä½†å®é™…æ“ä½œä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°å¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ã€‚

å¯ä¸å¯ä»¥åœ¨æœç´¢çš„æ—¶å€™å°±å»é‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚é‡åˆ°è¿™ä¸€ç±»ç›¸åŒå…ƒç´ ä¸è®¡ç®—é¡ºåºçš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨æœç´¢çš„æ—¶å€™å°±éœ€è¦ **æŒ‰æŸç§é¡ºåºæœç´¢**ã€‚å…·ä½“çš„åšæ³•æ˜¯ï¼šæ¯ä¸€æ¬¡æœç´¢çš„æ—¶å€™è®¾ç½® **ä¸‹ä¸€è½®æœç´¢çš„èµ·ç‚¹** `begin`ï¼Œè¯·çœ‹ä¸‹å›¾ã€‚

![](https://assets.ryantech.ltd/20201018213154.png)

å³ï¼šä»æ¯ä¸€å±‚çš„ç¬¬ 22 ä¸ªç»“ç‚¹å¼€å§‹ï¼Œéƒ½ä¸èƒ½å†æœç´¢äº§ç”ŸåŒä¸€å±‚ç»“ç‚¹å·²ç»ä½¿ç”¨è¿‡çš„ `candidate` é‡Œçš„å…ƒç´ ã€‚



#### ä»£ç å®ç°

```java
// DFS
// æ’åº + å‰ªæ
public List<List<Integer>> combinationSum(int[] candidates, int target) {
    List<List<Integer>> res = new ArrayList<>();

    if (candidates == null || candidates.length == 0) {
        return res;
    }

    Arrays.sort(candidates); // å…ˆè¡Œè¿›è¡Œä¸€ä¸ªæ’åº

    if (candidates[0] > target) { // å¦‚æœæ’åºçš„ç¬¬ä¸€ä¸ªæ•°å­—å¤§äº targetï¼Œé‚£ä¹ˆè¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„è§£
        return res;
    }

    int len = candidates.length;

    Deque<Integer> path = new ArrayDeque<>();
    dfs(candidates, 0, len, target, path, res);

    return res;
}

private void dfs(int[] candidates, int begin, int len, int target, Deque<Integer> path, List<List<Integer>> res) {
    // ç”±äºè¿›å…¥æ›´æ·±å±‚çš„æ—¶å€™ï¼Œå°äº 0 çš„éƒ¨åˆ†è¢«å‰ªæï¼Œå› æ­¤é€’å½’ç»ˆæ­¢æ¡ä»¶å€¼åªåˆ¤æ–­ç­‰äº 0 çš„æƒ…å†µ
    if (target == 0) {
        res.add(new ArrayList<>(path));
        return;
    }

    for (int i = begin; i < len; i++) {
        // é‡ç‚¹ç†è§£è¿™é‡Œå‰ªæï¼Œå‰ææ˜¯å€™é€‰æ•°ç»„å·²ç»æœ‰åº
        if (target - candidates[i] < 0) {
            break;
        }

        path.addLast(candidates[i]);
        dfs(candidates, i, len, target - candidates[i], path, res); // è¿™é‡Œä¾æ—§ä» i å¤„å¼€å§‹æœç´¢
        path.removeLast();
    }
}
```





---

## ğŸ’¡æ€»ç»“

![](https://assets.ryantech.ltd/20201018213309.png)



