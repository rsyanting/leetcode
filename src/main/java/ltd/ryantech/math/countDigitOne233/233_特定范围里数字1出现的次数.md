# 233 ï¼šç‰¹å®šèŒƒå›´é‡Œæ•°å­— 1 å‡ºç°çš„æ¬¡æ•°

---

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/number-of-digit-one/)

ğŸ“—difficultyï¼š**Medium**	

ğŸ¯Tagsï¼š

+ **[æ•°å­¦](https://leetcode-cn.com/tag/math/)**
---

## 1. é¢˜ç›®æè¿°ğŸ“ƒ

è¾“å…¥ä¸€ä¸ªæ•´æ•° `n` ï¼Œæ±‚ `1ï½n` è¿™ `n` ä¸ªæ•´æ•°çš„åè¿›åˆ¶è¡¨ç¤ºä¸­ `1` å‡ºç°çš„æ¬¡æ•°ã€‚

ä¾‹å¦‚ï¼Œè¾“å…¥ `12`ï¼Œ`1ï½12` è¿™äº›æ•´æ•°ä¸­åŒ…å« `1` çš„æ•°å­—æœ‰ `1`ã€`10`ã€`11` å’Œ `12`ï¼Œ`1` ä¸€å…±å‡ºç°äº† `5` æ¬¡ã€‚

**æ ·ä¾‹ 1 ï¼š**

```
è¾“å…¥ï¼šn = 12
è¾“å‡ºï¼š5
```



**æ ·ä¾‹ 2 ï¼š**

```
è¾“å…¥ï¼šn = 13
è¾“å‡ºï¼š6
```



**æ³¨æ„ï¼š**

+ `1 <= n < 2^31`

æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 233 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/number-of-digit-one/

---

## 2. è§£é¢˜æ€è·¯ğŸ’¡

é¦–å…ˆäº¤ä»£ä¸€ä¸‹æœ¬é“é¢˜ç›®çš„ä¸€ä¸ªè€ƒå¯Ÿæ–¹å‘ï¼šè€ƒå¯Ÿå¯¹ **æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦** çš„ä¸€ä¸ªä¼˜åŒ–ã€‚é¢˜ç›®çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä¹Ÿå¯ä»¥å¾ˆå¿«å†™å‡ºç®€å•çš„æ€è·¯ï¼Œä½†æ˜¯å…¶å¤æ‚åº¦ä¸å¤Ÿç†æƒ³ï¼Œé‡åˆ°æ•°æ®å¤§çš„æƒ…å†µå°±ä¼šè¶…æ—¶ã€‚

ä½†æ˜¯è¿™å¹¶ä¸å¦¨ç¢æˆ‘ä»¬çš„æ€è€ƒï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé¦–å…ˆè·å¾—ä¸€ä¸ªç®€å•ä¸”ç›´æ¥çš„è§£å†³æ€è·¯ï¼Œç„¶ååœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œæ˜¯ä¸€ä¸ªä¸é”™çš„æ€è·¯ã€‚

ä¸‹é¢ç»™å‡ºç®€å•ä¸”ç›´æ¥çš„åšæ³•ï¼šå¯¹æ¯ä¸€ä¸ªæ•°å­— `i` æ±‚è§£å…¶ä¸­åŒ…å«äº†å‡ ä¸ª `1`ï¼Œå¹¶ä¸”å°† `1` å‡ºç°çš„æ¬¡æ•°è®°å½•åœ¨ `count` ä¸­ï¼Œæœ€åè¿”å›æœ€ç»ˆçš„ `count` å³å¯ã€‚

#### ä»£ç å®ç°

```java
// éå†ï¼Œä¸å¯»æ‰¾è§„å¾‹çš„æ–¹æ³•
public int countDigitOne(int n) {
    int res = 0;
    for (int i = 1; i <= n; i++) {
        res += numberOfOne(i);
    }
    return res;
}

public int numberOfOne(int n) {
    int count = 0;
    while (n > 0) {
        if (n % 10 == 1) {
            count++;
        }
        n = n / 10;
    }
    return count;
}
```

å…¶é—®é¢˜ä¹Ÿå¾ˆæ˜¾ç„¶ï¼Œå°±æ˜¯å‡ºç°äº†å¤§é‡çš„é‡å¤çš„è®¡ç®—ï¼Œé€ æˆäº†æ—¶é—´ä¸Šçš„æµªè´¹ã€‚



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n log n)`  ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`  ã€‚

---

### å°è¯•å¯»æ‰¾è§„å¾‹æ¥é™ä½å¤æ‚åº¦

ä¸Šé¢çš„åšæ³•æ˜¯ç›´æ¥æ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œç›´ç™½çš„è¿›è¡Œåˆ¤æ–­ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„æè¿°ï¼Œå¯ä»¥å°è¯•å¯»æ‰¾å…¶ä¸­çš„è§„å¾‹ï¼Œä»è€Œå¸Œæœ›å‡å°‘è¿ç®—çš„æ¬¡æ•°ã€‚

> ä»¥ä¸‹æ€è·¯æ¥è‡ª [leetcode-cn ç”¨æˆ· Krahets çš„é¢˜è§£](https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/solution/mian-shi-ti-43-1n-zheng-shu-zhong-1-chu-xian-de-2/)ï¼Œæ„Ÿè°¢ä»–çš„ç²¾å½©åˆ†æã€‚

#### æ€è·¯åˆ†æ

ä»¥æ•°å­— `2314` ä¸ºä¾‹å­ï¼Œå¦‚æœè¦çŸ¥é“åä½ä¸Šå‡ºç°äº†å‡ æ¬¡æ•°å­— `1` ï¼Œè¯¥è¿™æ ·å»åˆ†æï¼š

![åˆ†æ2314](https://assets.ryantech.ltd/20200819151434.png)



å¯ä»¥å‚è€ƒç”Ÿæ´»ä¸­å¸¸è§çš„å¯†ç é”ï¼Œå›ºå®šå…¶ä¸­çš„ä¸€ä½å¯†ç ï¼Œæ‹¨åŠ¨å…¶ä»–ä½ç½®çš„å¯†ç ã€‚

è®¡ç®—å‡º `1` çš„å‡ºç°æ¬¡æ•°åï¼Œå†å°è¯•å¯»æ‰¾è§„å¾‹ã€‚

![](https://assets.ryantech.ltd/20200819155258.png)

![](https://assets.ryantech.ltd/20200819155341.png)

![](https://assets.ryantech.ltd/20200819155408.png)

![](https://assets.ryantech.ltd/20200819155437.png)



#### ä»£ç å®ç°

```java
public int countDigitOne(int n) {
    if (n <= 0) { // å¢åŠ ç¨‹åºçš„å¥å£®æ€§
        return 0;
    }
    
    int digit = 1, res = 0;
    int high = n / 10, cur = n % 10, low = 0; // æ¡ä»¶åˆå§‹åŒ–
    while (high != 0 || cur != 0) { // cur != 0 å¤„ç†æœ€é«˜ä½çš„æƒ…å†µ
        if (cur == 0) res += high * digit;
        else if (cur == 1) res += high * digit + low + 1;
        else res += (high + 1) * digit;
        low += cur * digit; // æ‰©å¤§ä½ä½
        cur = high % 10;
        high /= 10; // ç¼©å°é«˜ä½
        digit *= 10; // å› å­å¢é•¿
    }
    return res;
}
```



#### å¤æ‚åº¦åˆ†æ

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(log n)`  ã€‚
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`  ã€‚

---

## 3. æ€»ç»“ğŸ¯

#### ç›¸ä¼¼é¢˜ç›®

[233. æ•°å­— 1 çš„ä¸ªæ•°](https://leetcode-cn.com/problems/number-of-digit-one/) ï¼ˆæ³¨æ„ç»™å®šçš„æ•°æ®çš„èŒƒå›´ï¼‰

