# 77 : ç»„åˆ

## ğŸ“Œé¢˜ç›®è¯¦æƒ…

[leetcode-cn é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/combinations/)

ğŸ“—Difficultyï¼š**Medium** 

ğŸ¯Tagsï¼š

+ [å›æº¯](https://leetcode-cn.com/tag/backtracking/)

---

## ğŸ“ƒé¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å› `1 ... n` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚



**æ ·ä¾‹ 1ï¼š**

```
è¾“å…¥: n = 4, k = 2
è¾“å‡º:
[
  [2,4],
  [3,4],
  [2,3],
  [1,2],
  [1,3],
  [1,4],
]
```



****

## ğŸ¹ğŸ¯è§£é¢˜æ€è·¯

> [å›æº¯ç®—æ³• + å‰ªæï¼ˆJavaï¼‰](https://leetcode-cn.com/problems/combinations/solution/hui-su-suan-fa-jian-zhi-python-dai-ma-java-dai-ma-/) 

å›æº¯ç®—æ³•é¦–å…ˆéœ€è¦ç”»å‡ºé€’å½’æ ‘ï¼Œä¸åŒçš„æ ‘å†³å®šäº†ä¸åŒçš„ä»£ç å®ç°ã€‚ä¸‹é¢ç»™å‡ºäº†ä¸¤ç§ç”»æ ‘çš„æ€è·¯ã€‚

### æ ¹æ®æœç´¢èµ·ç‚¹ç”»å‡ºäºŒå‰æ ‘

æ—¢ç„¶æ˜¯æ ‘å½¢é—®é¢˜ä¸Šçš„ **æ·±åº¦ä¼˜å…ˆéå†**ï¼Œå› æ­¤é¦–å…ˆç”»å‡ºæ ‘å½¢ç»“æ„ã€‚ä¾‹å¦‚è¾“å…¥ï¼š`n = 4, k = 2`ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å¦‚ä¸‹é€’å½’ç»“æ„ï¼š

+ å¦‚æœç»„åˆé‡Œæœ‰ `1` ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ `[2, 3, 4]` é‡Œå†æ‰¾ `1` ä¸ªæ•°ï¼›
+ å¦‚æœç»„åˆé‡Œæœ‰ `2` ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ `[3, 4]` é‡Œå†æ‰¾ `1` æ•°ã€‚æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½å†è€ƒè™‘ `1`ï¼Œå› ä¸ºåŒ…å« `1` çš„ç»„åˆï¼Œåœ¨ç¬¬ `1` ç§æƒ…å†µä¸­å·²ç»åŒ…å«ã€‚

ä¾æ¬¡ç±»æ¨ï¼ˆåé¢éƒ¨åˆ†çœç•¥ï¼‰ï¼Œä»¥ä¸Šæè¿°ä½“ç°çš„ **é€’å½’** ç»“æ„æ˜¯ï¼šåœ¨ä»¥ `n` ç»“å°¾çš„å€™é€‰æ•°ç»„é‡Œï¼Œé€‰å‡ºè‹¥å¹²ä¸ªå…ƒç´ ã€‚ç”»å‡ºé€’å½’ç»“æ„å¦‚ä¸‹å›¾ï¼š

![å›¾ç¤º](https://assets.ryantech.ltd/20201017203442.png)



**è¯´æ˜ï¼š**

+ å¶å­ç»“ç‚¹çš„ä¿¡æ¯ä½“ç°åœ¨ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯å¾„ä¸Šï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªè¡¨ç¤ºè·¯å¾„çš„å˜é‡ `path`ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç‰¹åˆ«åœ°ï¼Œ`path` æ˜¯ä¸€ä¸ªæ ˆï¼›
+ æ¯ä¸€ä¸ªç»“ç‚¹é€’å½’åœ°åœ¨åšåŒæ ·çš„äº‹æƒ…ï¼ŒåŒºåˆ«åœ¨äºæœç´¢èµ·ç‚¹ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªå˜é‡ `begin` ï¼Œè¡¨ç¤ºåœ¨åŒºé—´ `[begin, n]` é‡Œé€‰å‡ºè‹¥å¹²ä¸ªæ•°çš„ç»„åˆï¼›
+ å¯èƒ½æœ‰ä¸€äº›åˆ†æ”¯æ²¡æœ‰å¿…è¦æ‰§è¡Œï¼Œæˆ‘ä»¬æ”¾åœ¨ä¼˜åŒ–ä¸­ä»‹ç»ã€‚

**å‹æƒ…æç¤ºï¼šå¯¹äºè¿™ä¸€ç±»é—®é¢˜ï¼Œç”»å›¾å¸®åŠ©åˆ†ææ˜¯éå¸¸é‡è¦çš„è§£é¢˜æ–¹æ³•ã€‚**



#### ä¸å‰ªæçš„ä»£ç 



```java
// DFS ä¸å‡ææ–¹æ³•
public List<List<Integer>> combine(int n, int k) {
    List<List<Integer>> res = new ArrayList<>();
    // ç‰¹åˆ¤
    if (k <= 0 || n < k) {
        return res;
    }

    Deque<Integer> path = new ArrayDeque<>();
    // ä» 1 å¼€å§‹æ˜¯é¢˜ç›®çš„è®¾å®š
    dfs(n, k, 1, path, res);
    return res;
}

private void dfs(int n, int k, int begin, Deque<Integer> path, List<List<Integer>> res) {
    // é€’å½’ç»ˆæ­¢çš„æ¡ä»¶
    // å½“ path ä¸­å­˜å‚¨çš„å…ƒç´ å’Œè¦æ±‚ç»„åˆçš„å…ƒç´ ä¸ªæ•°ç›¸ç­‰æ—¶ï¼Œåœæ­¢ dfs
    if (path.size() == k) {
        res.add(new ArrayList<>(path));
        return;
    }

    // éå†å¯èƒ½çš„æœç´¢çš„èµ·ç‚¹
    // è¿™é‡Œä¸ºä»€ä¹ˆä¸éœ€è¦ used ï¼Ÿå› ä¸ºè¿™é‡Œåªèƒ½å‘åæœç´¢äº†ï¼Œè¿™é‡Œæ˜¯ç»„åˆï¼Œå‘å‰æœç´¢ä¼šå¯¼è‡´é‡å¤ç»„åˆ
    for (int i = begin; i <= n; i++) {
        path.addLast(i);
        dfs(n, k, i + 1, path, res); // ç»§ç»­å°è¯•å‘åæœç´¢
        // å›æº¯
        path.removeLast();
    }
}
```



#### å‰ªæçš„ä»£ç 

æœç´¢æ˜¯æœ‰ä¸Šç•Œçš„ã€‚è¶…è¶Šäº†ä¸Šç•Œï¼Œå°±æ²¡æœ‰å¿…è¦å»è¿›è¡Œæœç´¢äº†ï¼Œç›´æ¥è·³è¿‡å³å¯ï¼Œæ­¤ä¸º **å‰ªæ**ã€‚



```java
// DFS å‡ææ–¹æ³•
public List<List<Integer>> combine(int n, int k) {
    List<List<Integer>> res = new ArrayList<>();
    // ç‰¹åˆ¤
    if (k <= 0 || n < k) {
        return res;
    }

    Deque<Integer> path = new ArrayDeque<>();
    // ä» 1 å¼€å§‹æ˜¯é¢˜ç›®çš„è®¾å®š
    dfs(n, k, 1, path, res);
    return res;
}

private void dfs(int n, int k, int begin, Deque<Integer> path, List<List<Integer>> res) {
    // é€’å½’ç»ˆæ­¢çš„æ¡ä»¶
    // å½“ path ä¸­å­˜å‚¨çš„å…ƒç´ å’Œè¦æ±‚ç»„åˆçš„å…ƒç´ ä¸ªæ•°ç›¸ç­‰æ—¶ï¼Œåœæ­¢ dfs
    if (path.size() == k) {
        res.add(new ArrayList<>(path));
        return;
    }

    // éå†å¯èƒ½çš„æœç´¢çš„èµ·ç‚¹
    // æœç´¢çš„èµ·ç‚¹æœ‰ä¸Šç•Œï¼Œå¹¶ä¸æ˜¯å¯ä»¥å–åˆ°æœ€åä¸€ä¸ª
    // ä¾‹å¦‚ n = 6ï¼Œk = 4 æƒ…å†µä¸‹ï¼Œpath.size = 1 æ¥ä¸‹æ¥éœ€è¦ 3 ä¸ªæ•°å­—ï¼Œæœç´¢æœ€å¤§èµ·ç‚¹æ˜¯ 4
    // ä¾‹å¦‚ n = 6ï¼Œk = 4 æƒ…å†µä¸‹ï¼Œpath.size = 2 æ¥ä¸‹æ¥éœ€è¦ 2 ä¸ªæ•°å­—ï¼Œæœç´¢æœ€å¤§èµ·ç‚¹æ˜¯ 5
    // è¿™é‡Œä¸ºä»€ä¹ˆä¸éœ€è¦ used ï¼Ÿå› ä¸ºè¿™é‡Œåªèƒ½å‘åæœç´¢äº†ï¼Œè¿™é‡Œæ˜¯ç»„åˆï¼Œå‘å‰æœç´¢ä¼šå¯¼è‡´é‡å¤ç»„åˆ
    for (int i = begin; i <= n - (k - path.size()) + 1; i++) {
        path.addLast(i);
        dfs(n, k, i + 1, path, res); // ç»§ç»­å°è¯•å‘åæœç´¢
        // å›æº¯
        path.removeLast();
    }
}
```







---

## ğŸ’¡æ€»ç»“

### ç›¸ä¼¼é¢˜ç›®

#### [39. ç»„åˆæ€»å’Œ](https://leetcode-cn.com/problems/combination-sum/)

å…³äºåˆ†æéƒ¨åˆ†ï¼Œè¿™é‡Œä¸èµ˜è¿°äº†ã€‚

```java
// DFS
// æ’åº + å‰ªæ
public List<List<Integer>> combinationSum(int[] candidates, int target) {
    List<List<Integer>> res = new ArrayList<>();

    if (candidates == null || candidates.length == 0) {
        return res;
    }

    Arrays.sort(candidates); // å…ˆè¡Œè¿›è¡Œä¸€ä¸ªæ’åº

    if (candidates[0] > target) { // å¦‚æœæ’åºçš„ç¬¬ä¸€ä¸ªæ•°å­—å¤§äº targetï¼Œé‚£ä¹ˆè¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„è§£
        return res;
    }

    int len = candidates.length;

    Deque<Integer> path = new ArrayDeque<>();
    dfs(candidates, 0, len, target, path, res);

    return res;
}

private void dfs(int[] candidates, int begin, int len, int target, Deque<Integer> path, List<List<Integer>> res) {
    // ç”±äºè¿›å…¥æ›´æ·±å±‚çš„æ—¶å€™ï¼Œå°äº 0 çš„éƒ¨åˆ†è¢«å‰ªæï¼Œå› æ­¤é€’å½’ç»ˆæ­¢æ¡ä»¶å€¼åªåˆ¤æ–­ç­‰äº 0 çš„æƒ…å†µ
    if (target == 0) {
        res.add(new ArrayList<>(path));
        return;
    }

    for (int i = begin; i < len; i++) {
        // é‡ç‚¹ç†è§£è¿™é‡Œå‰ªæï¼Œå‰ææ˜¯å€™é€‰æ•°ç»„å·²ç»æœ‰åº
        if (target - candidates[i] < 0) {
            break;
        }

        path.addLast(candidates[i]);
        dfs(candidates, i, len, target - candidates[i], path, res); // è¿™é‡Œä¾æ—§ä» i å¤„å¼€å§‹æœç´¢
        path.removeLast();
    }
}
```



#### [40. ç»„åˆæ€»å’Œ II](https://leetcode-cn.com/problems/combination-sum-ii/)

```java
// DFS
// å¤§å‰ªæ + å°å‰ªæ
// å‚è€ƒ 39. ç»„åˆæ€»å’Œ çš„å‰ªæä»£ç 
public List<List<Integer>> combinationSum2(int[] candidates, int target) {
    List<List<Integer>> res = new ArrayList<>();

    if (candidates == null || candidates.length == 0) {
        return res;
    }

    Arrays.sort(candidates); // å…³é”®æ­¥éª¤

    if (candidates[0] > target) {
        return res;
    }

    int len = candidates.length;
    Deque<Integer> path = new ArrayDeque<>();
    dfs(candidates, len, 0, target, path, res);

    return res;
}

private void dfs(int[] candidates, int len, int begin, int target, Deque<Integer> path, List<List<Integer>> res) {
    // é€’å½’ç»“æŸçš„æ¡ä»¶
    if (target == 0) {
        res.add(new ArrayList<>(path));
        return;
    }

    for (int i = begin; i < len; i++) {
        // å¤§å‰ªæï¼Œå¦‚æœå°äºäº†ï¼Œé‚£ä¹ˆä¸éœ€è¦æœç´¢äº†ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ å»æœç´¢
        if (target - candidates[i] < 0) {
            break;
        }

        // å°å‰ªæï¼šåŒä¸€å±‚ç›¸åŒæ•°å€¼çš„ç»“ç‚¹ï¼Œä»ç¬¬ 2 ä¸ªå¼€å§‹ï¼Œå€™é€‰æ•°æ›´å°‘ï¼Œç»“æœä¸€å®šå‘ç”Ÿé‡å¤ï¼Œå› æ­¤è·³è¿‡ï¼Œç”¨ continue
        if (i > begin && candidates[i] == candidates[i - 1]) {
            continue;
        }

        path.addLast(candidates[i]);
        dfs(candidates, len, i + 1, target - candidates[i], path, res); // i + 1 å…ƒç´ ä¸èƒ½é‡å¤ä½¿ç”¨
        path.removeLast();
    }
}
```



#### [216. ç»„åˆæ€»å’Œ III](https://leetcode-cn.com/problems/combination-sum-iii/)



